# This template includes the steps of the general install phase
# that is specified in the .travis.yml of the upstream repo.
# This is the default install phase that is reused by some of the
# parallel jobs in the build matrix of the .travis.yml file.

steps:
  - bash: |
      set -xe
      if [ -x "$(command -v bazel)" -a -x "$(command -v bazelisk)" ]; then
        echo 'Bazel is already installed'
        bazel info
        bazel --version
        exit 0
      fi
      if [[ $AGENT_OS == "Darwin" ]]; then
        . $HELPER_SCRIPTS/bazel-osx.sh"
      else
        . #HELPER_SCRIPTS/linux-bazelisk
      fi
      exit 0
    env:
      HELPER_SCRIPTS: $(Build.SourcesDirectory)/azure_pipelines/scripts
    displayName: 'Check Bazelisk'
    timeoutInMinutes: 60